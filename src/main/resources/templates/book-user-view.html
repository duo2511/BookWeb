<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="ISO-8859-1">
<title>Book-detail</title>
<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
	integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
	crossorigin="anonymous">
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/rateYo/2.3.2/jquery.rateyo.min.css">
<link rel="stylesheet" href="/css/index.css">
<script type="text/javascript" th:src="@{/js/validation.js}"></script>

</head>
<body>
	<div>
		<div>
			<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
				<div class="container-fluid">
					<a class="navbar-brand"
						th:href="@{/user-book-home/{iduser}(iduser=${user.username})}">LIBRARY</a>


					<form th:object="${user}" class="container col-4">
						<input type="text" th:value="'Hello '+ ${user.name}" disabled>
					</form>

				</div>
			</nav>
		</div>


		<div>
			<div class="row container">
				<h1 class="container col-4 title">Book View</h1>
			</div>

			<form>
				<div class="book-box">

					<div class="info-book-box col-lg-4">
						<div class="row">
							<div class="col">
								<label>Title : </label> <input type="text" name="title"
									class="form-control container" th:value="${book.title}"
									disabled><br />
							</div>

							<div class="col">
								<label>Author : </label> <input type="text" name="author"
									class="form-control" th:value="${book.author}" disabled><br />
							</div>
						</div>

						<label>Description : </label> <br />
						<textarea rows="5" cols="45" name="description"
							th:text="${book.description}" disabled></textarea>
						<br />


						<div class="row">
							<div class="col">
								<label>Release Date : </label> <input type="date"
									name="releaseDate" class="form-control"
									th:value="${book.releaseDate}" disabled><br />
							</div>
							<div class="col">
								<label>Number of Pages : </label> <input type="number"
									name="numberOfPages" class="form-control"
									th:value="${book.numberOfPages}" disabled><br />
							</div>
						</div>

						<div class="row">
							<div class="col">
								<label>Type : </label> <select th:field="${book.category}"
									name="category" id="category" disabled>
									<option value="Comic" selected>Comic</option>
									<option value="Novel">Novel</option>
									<option value="Adventure">Adventure</option>
								</select>

							</div>

						</div>

					</div>


					<div class="img-book-box col-lg-4">
						<img class="shadow" style="max-width: 250px"
							th:src="@{http://localhost:8080/book-img?id={id1} (id1=${book.id})}">
						<div class="col input">
							<label>Price : </label> <span th:text="${book.price}+' VND'"></span><br />
						</div>
						<a th:href="@{'/book-order/'+${book.id}+'/'+${user.username}}"
							class="btn btn-success button">Buy</a>
					</div>


				</div>
			</form>


		</div>




		<div
			class="comment-box justify-content-center mt-5 border-left border-right shadow">

			<div
				class="write-comment-box d-flex justify-content-center pt-3 pb-2">

				<form th:action="@{'/comment/'+${book.id}+'/'+${user.username}}"
					method="post" class="needs-validation was-validated" novalidate>

					<div>
						<input class="form-control" type="hidden"
							th:value="${user.username}" disabled />
					</div>
					<div>
						<label class="text-comment-box">Write your comment:</label> <br>
						<textarea rows="5" cols="40" name="content"
							class="form-control is-valid" id="validationTextarea"
							required="required"></textarea>
						<div class="invalid-feedback">Please enter a message in the
							text area.</div>
						<br />
					</div>

					<div class="rateyo" id="rating" data-rateyo-rating="0"
						data-rateyo-num-stars="5" data-rateyo-score="3"></div>

					<span class='text-comment-box result'>0</span> <input type="hidden"
						name="rating" class="form-check-input" id="validationFormCheck1"
						required="required">
					<div class="valid-feedback">Valid.</div>
					<div class="invalid-feedback">Please fill out this field.</div>
					<br />

					<div>
						<input type="submit" class="btn btn-primary" name="Send">
					</div>

				</form>
			</div>


			<div class="list-comment-box">
				<h3 class="text-comment-box">Review</h3>
				<tr th:each="comment: ${comments}">

					<div class="review-box d-flex justify-content-between py-1 pt-2">



						<div class="second py-2 px-2">
							<span id="text" th:text="${comment.iduser}"></span> <span
								class="text3" th:text="${comment.time}"></span><br>
								 <span
								id="text1" th:text="${comment.content}"></span><br>
							<div class="rateyo" th:data-rateyo-rating="${comment.point}"
								data-rateyo-num-stars="5" data-rateyo-score="3" disabled></div>

							<label>Rating point:</label> <span th:text="${comment.point}"></span>

						</div>
					</div>
				</tr>
			</div>

		</div>

	</div>







	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/rateYo/2.3.2/jquery.rateyo.min.js"></script>


	<script>
		$(function() {
			$(".rateyo").rateYo()
					.on(
							"rateyo.change",
							function(e, data) {
								var rating = data.rating;
								$(this).parent().find('.score').text(
										'score :'
												+ $(this).attr(
														'data-rateyo-score'));
								$(this).parent().find('.result').text(
										'rating :' + rating);
								$(this).parent().find('input[name=rating]')
										.val(rating); //add rating value to input field
							});
		});
	</script>

</body>
</html>