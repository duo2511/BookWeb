<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="ISO-8859-1">
<title>Book-detail</title>
<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
	integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
	crossorigin="anonymous">
<script type="text/javascript" th:src="@{/js/validation.js}"></script>
<link rel="stylesheet" href="/css/index.css">
</head>
<body>
	<div class="row container">
		<h1 class="container">Book Save</h1>
	</div>
	<!-- @{/book/save/{id}(id=${book.id})} -->
	<form enctype="multipart/form-data"
		th:action="@{/book/update/{id} (id=${book.id})}" th:method="PUT"
		class="container col-4 needs-validation">

		<div class="row">
			<div class="col">
				Title :<input type="text" name="title"
					class="form-control container" th:value="${book.title}"
					required="required"><br />
				<div class="valid-feedback">Valid.</div>
				<div class="invalid-feedback">Please fill out this field.</div>
			</div>
			<div class="col">
				Author : <input type="text" name="author" class="form-control"
					th:value="${book.author}" required="required"><br />
				<div class="valid-feedback">Valid.</div>
				<div class="invalid-feedback">Please fill out this field.</div>
			</div>
		</div>

		<label>Description : </label> <br />
		<textarea rows="5" cols="60" name="description"
			th:text="${book.description}"></textarea>
		<br />


		<div class="row">
			<div class="col">
				Release Date : <input type="date" name="releaseDate"
					class="form-control" th:value="${book.releaseDate}"
					required="required"><br />
				<div class="valid-feedback">Valid.</div>
				<div class="invalid-feedback">Please fill out this field.</div>
			</div>
			<div class="col">
				Number of Pages : <input type="number" name="numberOfPages"
					class="form-control" th:value="${book.numberOfPages}"
					required="required"><br />
				<div class="valid-feedback">Valid.</div>
				<div class="invalid-feedback">Please fill out this field.</div>
			</div>
		</div>

		<div class="row">
			<div class="col">
				Type : <select th:field="${book.category}" name="category"
					id="category" disabled>
					<option value="Comic" selected>Comic</option>
					<option value="Novel">Novel</option>
					<option value="Adventure">Adventure</option>
				</select>

			</div>

		</div>
		<br>
		<div class=" container col">
			<img style="max-width: 200px"
				th:src="@{http://localhost:8080/book-img?id={id1} (id1=${book.id})}">
			<div class="col">
				Price : <input type="number" name="price" class="form-control"
					th:value="${book.price}"><br />
			</div>
		</div>
		<img style="max-width: 150px" id="imagePath" alt=""> <input
			type="file" name="imageLink" th:value="${book.imageLink}"
			onchange="loadFile(event)" accept="image/gif, image/jpeg, image/png"
			value="Change cover image" class="btn"> <input type="submit"
			value="Save book" class="btn btn-success">
	</form>

</body>
</html>
<script>
	var loadFile = function(event) {
		var image = document.getElementById('imagePath');
		image.src = URL.createObjectURL(event.target.files[0]);
	};
</script>

